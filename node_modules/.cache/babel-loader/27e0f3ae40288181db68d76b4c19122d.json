{"ast":null,"code":"import _regeneratorRuntime from \"C:/CodingProjects/ABCspelet/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"C:/CodingProjects/ABCspelet/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"C:/CodingProjects/ABCspelet/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"C:/CodingProjects/ABCspelet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\CodingProjects\\\\ABCspelet\\\\src\\\\App.tsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport * as React from \"react\"; //XState library & Game DM-machine\n\nimport { Machine, assign, send } from \"xstate\";\nimport { useMachine, asEffect } from \"@xstate/react\";\nimport { dmMachine } from './dmGame'; //Animation effects\n\nimport Confetti from 'react-dom-confetti';\nimport TextLoop from \"react-text-loop\";\nimport { useWindupString } from \"windups\"; // import HeadShake from 'react-reveal/HeadShake';\n\nvar HeadShake = require('react-reveal/HeadShake'); //?import shows error in TS, so use require() here instead\n\n\nvar RubberBand = require('react-reveal/RubberBand');\n\nimport Tippy from '@tippyjs/react'; // import 'tippy.js/dist/tippy.css'; \n//Browser detection \n\nimport { isChrome, isEdge } from \"react-device-detect\"; // Imports the Google Cloud client library\n\nvar textToSpeech = require('@google-cloud/text-to-speech'); // Import other required libraries\n\n\nvar fs = require('fs');\n\nvar util = require('util'); // Creates a client\n\n\nvar client = new textToSpeech.TextToSpeechClient();\n\nfunction quickStart() {\n  return _quickStart.apply(this, arguments);\n}\n\nfunction _quickStart() {\n  _quickStart = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var text, request, _yield$client$synthes, _yield$client$synthes2, response, writeFile;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            // The text to synthesize\n            text = 'hello, world!'; // Construct the request\n\n            request = {\n              input: {\n                text: text\n              },\n              // Select the language and SSML voice gender (optional)\n              voice: {\n                languageCode: 'en-US',\n                ssmlGender: 'NEUTRAL'\n              },\n              // select the type of audio encoding\n              audioConfig: {\n                audioEncoding: 'MP3'\n              }\n            }; // Performs the text-to-speech request\n\n            _context2.next = 4;\n            return client.synthesizeSpeech(request);\n\n          case 4:\n            _yield$client$synthes = _context2.sent;\n            _yield$client$synthes2 = _slicedToArray(_yield$client$synthes, 1);\n            response = _yield$client$synthes2[0];\n            // Write the binary audio content to a local file\n            writeFile = util.promisify(fs.writeFile);\n            _context2.next = 10;\n            return writeFile('output.mp3', response.audioContent, 'binary');\n\n          case 10:\n            console.log('Audio content written to file: output.mp3');\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _quickStart.apply(this, arguments);\n}\n\nquickStart(); // import { inspect } from \"@xstate/inspect\";\n// inspect({ url:\"https://statecharts.io/inspect\", iframe: false });\n// State machines: ASR-TTS (voice interface) & dmGame\n\nimport { useSpeechSynthesis, useSpeechRecognition } from 'react-speech-kit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar machine = Machine({\n  id: 'root',\n  type: 'parallel',\n  states: {\n    dm: _objectSpread({}, dmMachine),\n    asrtts: {\n      initial: 'idle',\n      states: {\n        idle: {\n          on: {\n            LISTEN: 'recognising',\n            SPEAK: {\n              target: 'speaking',\n              actions: assign(function (_context, event) {\n                return {\n                  ttsAgenda: event.value\n                };\n              })\n            }\n          }\n        },\n        recognising: {\n          initial: 'progress',\n          entry: 'recStart',\n          exit: 'recStop',\n          on: {\n            ASRRESULT: {\n              actions: ['recLogResult', assign(function (_context, event) {\n                return {\n                  recResult: event.value\n                };\n              })],\n              target: '.match'\n            },\n            RECOGNISED: 'idle'\n          },\n          states: {\n            progress: {},\n            match: {\n              entry: send('RECOGNISED')\n            }\n          }\n        },\n        speaking: {\n          entry: 'ttsStart',\n          on: {\n            ENDSPEECH: 'idle'\n          }\n        }\n      }\n    }\n  }\n}, {\n  actions: {\n    recLogResult: function recLogResult(context) {\n      /* context.recResult = event.recResult; */\n      console.log('<< ASR: ' + context.recResult);\n    },\n    test: function test() {\n      console.log('test');\n    },\n    logIntent: function logIntent(context) {\n      /* context.nluData = event.data */\n      console.log('<< NLU intent: ' + context.nluData.intent.name);\n    }\n  }\n});\n\n//COMPONENT: Big button in the middle, with changing texts\nvar ReactiveButton = function ReactiveButton(props) {\n  _s();\n\n  var playingNow = props.state.context.playingNow;\n  var ttsAgenda = props.state.context.ttsAgenda;\n  var maxHinted = props.state.context.hinted >= 5;\n  var maxSkipped = props.state.context.skipped >= 5;\n  var promptInGame;\n\n  if (maxSkipped && maxHinted) {\n    promptInGame = '...eller sÃ¤g Starta om, Sluta';\n  } else if (maxSkipped && !maxHinted) {\n    promptInGame = '...eller sÃ¤g Tips, Starta om, Sluta';\n  } else if (!maxSkipped && maxHinted) {\n    promptInGame = '...eller sÃ¤g Pass, Starta om, Sluta';\n  } else {\n    promptInGame = '...eller sÃ¤g Tips, Pass, Starta om, Sluta';\n  } //default\n\n\n  var speakingText = playingNow ? 'ðŸ˜¼ ' + ttsAgenda : 'ðŸ˜» ' + ttsAgenda;\n  var promptMsg = playingNow ? promptInGame : \"...sÃ¤g Ja eller Nej\";\n\n  switch (true) {\n    case props.state.matches({\n      asrtts: 'recognising'\n    }):\n      return /*#__PURE__*/_jsxDEV(\"button\", _objectSpread(_objectSpread({\n        type: \"button\",\n        className: \"glow-on-hover\",\n        style: {\n          animation: \"glowing 20s linear\"\n        }\n      }, props), {}, {\n        children: /*#__PURE__*/_jsxDEV(TextLoop, {\n          mask: true,\n          interval: 5000,\n          springConfig: {\n            stiffness: 170,\n            damping: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"code\", {\n              children: [\" \", speakingText, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 30\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"code\", {\n              children: [\" \", promptMsg, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 30\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, _this)\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, _this);\n\n    case props.state.matches({\n      asrtts: 'speaking'\n    }):\n      var _useWindupString = useWindupString(speakingText),\n          _useWindupString2 = _slicedToArray(_useWindupString, 1),\n          spokentext = _useWindupString2[0]; // adds char-by-char animation\n\n\n      return /*#__PURE__*/_jsxDEV(\"button\", _objectSpread(_objectSpread({\n        type: \"button\",\n        className: \"glow-on-hover\",\n        style: {\n          animation: \"bordering 1s infinite\"\n        }\n      }, props), {}, {\n        children: /*#__PURE__*/_jsxDEV(\"code\", {\n          children: spokentext\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, _this)\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, _this);\n\n    default:\n      return /*#__PURE__*/_jsxDEV(\"button\", _objectSpread(_objectSpread({\n        type: \"button\",\n        className: \"glow-on-hover\"\n      }, props), {}, {\n        children: /*#__PURE__*/_jsxDEV(HeadShake, {\n          children: \"Spela nu!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, _this)\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, _this);\n  }\n}; // //MAIN CONTAINER: React webpage elements & VOI\n\n\n_s(ReactiveButton, \"S+bNtRj7NBvxoKWW+IAkMKMprO8=\", false, function () {\n  return [useWindupString];\n});\n\n_c = ReactiveButton;\nexport default function App() {\n  _s2();\n\n  //Voice interface events (& console logs)\n  //Text to speech:\n  var _useSpeechSynthesis = useSpeechSynthesis({\n    onEnd: function onEnd() {\n      send('ENDSPEECH');\n    }\n  }),\n      speak = _useSpeechSynthesis.speak,\n      cancel = _useSpeechSynthesis.cancel,\n      speaking = _useSpeechSynthesis.speaking,\n      voices = _useSpeechSynthesis.voices; //Speech to text\n\n\n  var _useSpeechRecognition = useSpeechRecognition({\n    onResult: function onResult(result) {\n      send({\n        type: \"ASRRESULT\",\n        value: result\n      });\n    }\n  }),\n      listen = _useSpeechRecognition.listen,\n      listening = _useSpeechRecognition.listening,\n      stop = _useSpeechRecognition.stop; //List the supported synthesis-voices on the browswer:\n\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      voiceIndex = _React$useState2[0],\n      setVoiceIndex = _React$useState2[1];\n\n  console.log(voices); //An array of available voices/languages ... varies depending on the computer/browser\n\n  var voice = voices[32] || null; // voices[idx]? voices[idx] : null *(browser default voice) //edge:8 bengt, edgeDev:32 bengt \n\n  var _useMachine = useMachine(machine, {\n    devTools: true,\n    actions: {\n      recStart: asEffect(function () {\n        console.log('Ready to receive a voice input.');\n        listen({\n          interimResults: false,\n          continuous: true,\n          lang: 'sv-SE' //Config ASR input language here. //list of langs https://cloud.google.com/speech-to-text/docs/languages\n\n        });\n      }),\n      recStop: asEffect(function () {\n        console.log('Recognition stopped.');\n        stop();\n      }),\n      ttsStart: asEffect(function (context, effect) {\n        console.log('Speaking...');\n        speak({\n          text: context.ttsAgenda,\n          voice: voice //Config of TTS output language/voice\n\n        });\n      }),\n      ttsCancel: asEffect(function (context, effect) {\n        console.log('TTS STOP...');\n        cancel();\n      }),\n      speak: asEffect(function (context) {\n        console.log('Speaking...');\n        speak({\n          text: context.ttsAgenda\n        });\n      })\n    }\n  }),\n      _useMachine2 = _slicedToArray(_useMachine, 3),\n      current = _useMachine2[0],\n      send = _useMachine2[1],\n      service = _useMachine2[2]; // dmMachine-context / React-states, to display on webpage or turn components on/off\n\n\n  var confettiSwitch = current.context.confettiSwitch; //triggers confetti when true\n\n  var playingNow = current.context.playingNow;\n  var tally = current.context.tally;\n  var letter = current.context.letter; // Config for confetti \n\n  var confettiConfig = {\n    angle: 90,\n    spread: 360,\n    startVelocity: 80,\n    elementCount: 400,\n    dragFriction: 0.12,\n    duration: 7500,\n    stagger: 1,\n    width: \"7px\",\n    height: \"7px\",\n    perspective: \"210px\",\n    colors: [\"#a864fd\", \"#29cdff\", \"#78ff44\", \"#ff718d\", \"#fdff6a\"]\n  };\n  var clicked = 0;\n\n  var handleClick = function handleClick() {\n    if (clicked === 0) {\n      console.log(\"clicked\");\n      send('CLICK');\n      clicked = 1;\n    } else {\n      console.log(\"unclicked\");\n      send('UNCLICK');\n      clicked = 0;\n    }\n  }; //>>>JSX codes & various components\n  // Alt page: Show if not using Chrome or Edge\n\n\n  if (!isChrome && !isEdge) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"OtherBrowsers\",\n    children: /*#__PURE__*/_jsxDEV(HeadShake, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Box\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Din webbl\\xE4sare st\\xF6der inte taligenk\\xE4nning \\uD83E\\uDD72 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Anv\\xE4nd ist\\xE4llet Chrome eller Edge :-)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 9\n  }, this); //Show if using Chrome or Edge\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"PopoverButtons\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(PopoverButtons, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 46\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"LetterAndHeart\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"GlowLetter\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(YourLetter, {\n            letter: letter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 50\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Heart\",\n          children: playingNow && /*#__PURE__*/_jsxDEV(HeartBar, {\n            currentScore: tally,\n            maxScore: 5,\n            size: 50\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Confetti, {\n        active: confettiSwitch,\n        config: confettiConfig\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(RubberBand, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Button\",\n          children: /*#__PURE__*/_jsxDEV(ReactiveButton, {\n            state: current,\n            onClick: function onClick() {\n              handleClick();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Subtitles\",\n        children: /*#__PURE__*/_jsxDEV(UserSubtitles, {\n          state: current\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 281,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(App, \"VKvxuIZMtQTlSiJjT3LD5pxMEUE=\", false, function () {\n  return [useSpeechSynthesis, useSpeechRecognition, useMachine];\n});\n\n_c2 = App;\n; //COMPONENT: Displaying input of voice interface (ie, recResult)\n\nvar YourSubtitles = function YourSubtitles(props) {\n  _s3();\n\n  // Player's speech-- only displays when recResult!=undefined \n  var tally = props.state.context.tally;\n  var recResult = props.state.context.recResult; //Prefix face changes based on score of the game\n\n  var emojis = ['ðŸ˜—', 'ðŸ™‚', 'ðŸ˜€', 'ðŸ˜„', 'ðŸ˜', 'ðŸ¥³'];\n  var emoji = tally ? emojis[tally] : 'ðŸ™ƒ';\n  var subtitlesText;\n\n  if (props.state.matches({\n    asrtts: 'recognising'\n  })) {\n    subtitlesText = emoji + ' Lyssnar nu pÃ¥ dig...';\n  } else if (recResult && recResult != '') {\n    subtitlesText = emoji + ' ' + recResult;\n  } else {\n    subtitlesText = '';\n  }\n\n  var _useWindupString3 = useWindupString(subtitlesText),\n      _useWindupString4 = _slicedToArray(_useWindupString3, 1),\n      textAnimated = _useWindupString4[0];\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [\" \", textAnimated, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 9\n  }, _this);\n}; //This one doesn't show on Github pages...? but can run locally and use for presentation demo\n\n\n_s3(YourSubtitles, \"T1TGb1P+O1NhR2xfEfH+NroZm/E=\", false, function () {\n  return [useWindupString];\n});\n\n_c3 = YourSubtitles;\n\nvar UserSubtitles = function UserSubtitles(props) {\n  _s4();\n\n  var tally = props.state.context.tally;\n  var recResult = props.state.context.recResult; // const recResult='testing text'\n\n  var emojis = ['ðŸ˜—', 'ðŸ™‚', 'ðŸ˜€', 'ðŸ˜„', 'ðŸ˜', 'ðŸ¥³'];\n  var emoji = tally ? emojis[tally] : 'ðŸ™ƒ'; // const defaultText = props.state.matches({ asrtts: 'recognising' })? 'Listening...' : ''\n  // const subtitlesText = recResult? recResult : defaultText\n\n  var subtitlesText;\n\n  if (props.state.matches({\n    asrtts: 'recognising'\n  })) {\n    subtitlesText = 'Lyssnar nu pÃ¥ dig...';\n  } else if (recResult && recResult != '') {\n    subtitlesText = recResult;\n  } else {\n    subtitlesText = '';\n  }\n\n  var _useWindupString5 = useWindupString(subtitlesText),\n      _useWindupString6 = _slicedToArray(_useWindupString5, 1),\n      textAnimated = _useWindupString6[0];\n\n  var showing = subtitlesText != '';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"emoji-and-bubble\",\n    children: [showing && /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"speech-bubble\",\n      children: [\" \", textAnimated, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 26\n    }, _this), showing && /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"emoji\",\n      children: [\" \", emoji, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 25\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 366,\n    columnNumber: 9\n  }, _this);\n}; //COMPONENT: Capital letter of the game\n\n\n_s4(UserSubtitles, \"T1TGb1P+O1NhR2xfEfH+NroZm/E=\", false, function () {\n  return [useWindupString];\n});\n\n_c4 = UserSubtitles;\n\nvar YourLetter = function YourLetter(props) {\n  // Shows the letter of the current game round \n  var letter = props.letter;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: letter ? letter.toUpperCase() : ''\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 378,\n    columnNumber: 9\n  }, _this);\n}; //COMPONENT: Grey heart to be filled with pink, based on percentage\n\n\n_c5 = YourLetter;\n\nvar HeartBar = function HeartBar(props) {\n  var maxScore = props.maxScore;\n  var currentScore = props.currentScore > 0 ? props.currentScore : '';\n  var size = props.size;\n  var percentage = currentScore ? 100 * currentScore / maxScore : 0; //add other props? eg, showScore={true/false}; showPercentage={true/false}\n\n  var y = 24 - 24 * percentage / 100; //Height of the pink filling shape\n  //Below: Heart-shaped vector graphs & text inside\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ProgressBarH\",\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: size,\n      height: size,\n      viewBox: \"0 0 24 24\",\n      children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n        children: [/*#__PURE__*/_jsxDEV(\"clipPath\", {\n          id: \"cut-off-bottom\",\n          children: /*#__PURE__*/_jsxDEV(\"rect\", {\n            x: \"0\",\n            y: y,\n            width: \"24\",\n            height: \"24\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n          id: \"grey-grad\",\n          x1: \"0%\",\n          y1: \"0%\",\n          x2: \"0%\",\n          y2: \"100%\",\n          children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n            offset: \"0%\",\n            stopColor: \"#cfccce\",\n            stopOpacity: \"0.75\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"stop\", {\n            offset: \"60%\",\n            stopColor: \"#bab8ba\",\n            stopOpacity: \"0.85\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"stop\", {\n            offset: \"100%\",\n            stopColor: \"#949293\",\n            stopOpacity: \"0.9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n          id: \"pink-grad\",\n          x1: \"0%\",\n          y1: \"0%\",\n          x2: \"0%\",\n          y2: \"100%\",\n          children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n            offset: \"0%\",\n            stopColor: \"#ff33a7\",\n            stopOpacity: \"0.95\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"stop\", {\n            offset: \"60%\",\n            stopColor: \"#ff2667\",\n            stopOpacity: \"0.95\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"stop\", {\n            offset: \"100%\",\n            stopColor: \"rgb(255,0,0)\",\n            stopOpacity: \"0.95\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"path\", {\n        style: {\n          fill: \"url(#grey-grad)\"\n        },\n        d: \"M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"path\", {\n        style: {\n          fill: \"url(#pink-grad)\"\n        },\n        d: \"M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z\",\n        clipPath: \"url(#cut-off-bottom)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"text\", {\n        textAnchor: \"middle\",\n        x: \"12\",\n        y: \"15\",\n        color: \"white\",\n        fontSize: \"11\",\n        fill: \"white\",\n        opacity: \"0.45\",\n        style: {\n          animation: \"wiggle 2.5s ease-out infinite\",\n          animationDelay: '0.9s'\n        },\n        children: currentScore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 398,\n    columnNumber: 7\n  }, _this);\n};\n\n_c6 = HeartBar;\n\nvar PopoverButtons = function PopoverButtons() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Tippy, {\n      content: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Har du problem med att spela? :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"P\\xE5 grund av taligenk\\xE4nnarens begr\\xE4nsningar kan dessa hj\\xE4lpa till... \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 89\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 98\n          }, _this), \"-Tala klart och i normal takt.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 51\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 60\n          }, _this), \"-V\\xE4nta f\\xF6r katten att avsluta prata och b\\xF6rja lyssna p\\xE5 dig.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 17\n      }, _this),\n      className: \"popover-box\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"round-button\",\n        children: \"?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Tippy, {\n      content: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"ABC Game\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Designades av: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 40\n          }, _this), \"Liao Hsien-hao Calvin\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 46\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 25\n          }, _this), \"f\\xF6r kursprojektet av \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"LT2216 Dialogue Systems\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 46\n          }, _this), \" p\\xE5 G\\xF6teborgs universitet.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 34\n          }, _this), \"github.com/chickenbror/ABCgame\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 25\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 21\n      }, _this),\n      className: \"popover-box\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"round-button\",\n        children: \"i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 449,\n    columnNumber: 9\n  }, _this);\n};\n\n_c7 = PopoverButtons;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"ReactiveButton\");\n$RefreshReg$(_c2, \"App\");\n$RefreshReg$(_c3, \"YourSubtitles\");\n$RefreshReg$(_c4, \"UserSubtitles\");\n$RefreshReg$(_c5, \"YourLetter\");\n$RefreshReg$(_c6, \"HeartBar\");\n$RefreshReg$(_c7, \"PopoverButtons\");","map":{"version":3,"sources":["C:/CodingProjects/ABCspelet/src/App.tsx"],"names":["React","Machine","assign","send","useMachine","asEffect","dmMachine","Confetti","TextLoop","useWindupString","HeadShake","require","RubberBand","Tippy","isChrome","isEdge","textToSpeech","fs","util","client","TextToSpeechClient","quickStart","text","request","input","voice","languageCode","ssmlGender","audioConfig","audioEncoding","synthesizeSpeech","response","writeFile","promisify","audioContent","console","log","useSpeechSynthesis","useSpeechRecognition","machine","id","type","states","dm","asrtts","initial","idle","on","LISTEN","SPEAK","target","actions","_context","event","ttsAgenda","value","recognising","entry","exit","ASRRESULT","recResult","RECOGNISED","progress","match","speaking","ENDSPEECH","recLogResult","context","test","logIntent","nluData","intent","name","ReactiveButton","props","playingNow","state","maxHinted","hinted","maxSkipped","skipped","promptInGame","speakingText","promptMsg","matches","animation","stiffness","damping","spokentext","App","onEnd","speak","cancel","voices","onResult","result","listen","listening","stop","useState","voiceIndex","setVoiceIndex","devTools","recStart","interimResults","continuous","lang","recStop","ttsStart","effect","ttsCancel","current","service","confettiSwitch","tally","letter","confettiConfig","angle","spread","startVelocity","elementCount","dragFriction","duration","stagger","width","height","perspective","colors","clicked","handleClick","YourSubtitles","emojis","emoji","subtitlesText","textAnimated","UserSubtitles","showing","YourLetter","toUpperCase","HeartBar","maxScore","currentScore","size","percentage","y","fill","animationDelay","PopoverButtons"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\n\r\n//XState library & Game DM-machine\r\nimport { Machine, assign, send, State } from \"xstate\";\r\nimport { useMachine, asEffect } from \"@xstate/react\";\r\nimport { dmMachine } from './dmGame';\r\n\r\n\r\n//Animation effects\r\nimport Confetti from 'react-dom-confetti';\r\nimport TextLoop from \"react-text-loop\";\r\nimport { useWindupString } from \"windups\";\r\n        // import HeadShake from 'react-reveal/HeadShake';\r\nconst HeadShake = require('react-reveal/HeadShake'); //?import shows error in TS, so use require() here instead\r\nconst RubberBand = require('react-reveal/RubberBand');\r\n\r\nimport Tippy from '@tippyjs/react';\r\n// import 'tippy.js/dist/tippy.css'; \r\n\r\n\r\n\r\n//Browser detection \r\nimport { isChrome, isEdge } from \"react-device-detect\";\r\n\r\n// Imports the Google Cloud client library\r\nconst textToSpeech = require('@google-cloud/text-to-speech');\r\n\r\n// Import other required libraries\r\nconst fs = require('fs');\r\nconst util = require('util');\r\n// Creates a client\r\nconst client = new textToSpeech.TextToSpeechClient();\r\nasync function quickStart() {\r\n  // The text to synthesize\r\n  const text = 'hello, world!';\r\n\r\n  // Construct the request\r\n  const request = {\r\n    input: {text: text},\r\n    // Select the language and SSML voice gender (optional)\r\n    voice: {languageCode: 'en-US', ssmlGender: 'NEUTRAL'},\r\n    // select the type of audio encoding\r\n    audioConfig: {audioEncoding: 'MP3'},\r\n  };\r\n\r\n  // Performs the text-to-speech request\r\n  const [response] = await client.synthesizeSpeech(request);\r\n  // Write the binary audio content to a local file\r\n  const writeFile = util.promisify(fs.writeFile);\r\n  await writeFile('output.mp3', response.audioContent, 'binary');\r\n  console.log('Audio content written to file: output.mp3');\r\n}\r\nquickStart();\r\n\r\n\r\n// import { inspect } from \"@xstate/inspect\";\r\n// inspect({ url:\"https://statecharts.io/inspect\", iframe: false });\r\n\r\n\r\n// State machines: ASR-TTS (voice interface) & dmGame\r\nimport { useSpeechSynthesis, useSpeechRecognition } from 'react-speech-kit';\r\n\r\n\r\nconst machine = Machine<SDSContext, any, SDSEvent>({\r\n    id: 'root',\r\n    type: 'parallel',\r\n    states: {\r\n        dm: {\r\n            ...dmMachine  //dmGame\r\n        },\r\n        asrtts: {\r\n            initial: 'idle',\r\n            states: {\r\n                idle: {\r\n                    on: {\r\n                        LISTEN: 'recognising',\r\n                        SPEAK: {\r\n                            target: 'speaking',\r\n                            actions: assign((_context, event) => { return { ttsAgenda: event.value } })\r\n                        }\r\n                    }\r\n                },\r\n                recognising: {\r\n                    initial: 'progress',\r\n                    entry: 'recStart',\r\n                    exit: 'recStop',\r\n                    on: {\r\n                        ASRRESULT: {\r\n                            actions: ['recLogResult',\r\n                                assign((_context, event) => { return { recResult: event.value } })],\r\n                            target: '.match'\r\n                        },\r\n                        RECOGNISED: 'idle'\r\n                    },\r\n                    states: {\r\n                        progress: {\r\n                        },\r\n                        match: {\r\n                            entry: send('RECOGNISED'),\r\n                        },\r\n                    }\r\n                },\r\n                speaking: {\r\n                    entry: 'ttsStart',\r\n                    on: {\r\n                        ENDSPEECH: 'idle',\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n},\r\n    {\r\n        actions: {\r\n            recLogResult: (context: SDSContext) => {\r\n                /* context.recResult = event.recResult; */\r\n                console.log('<< ASR: ' + context.recResult);\r\n\r\n            },\r\n            test: () => {\r\n                console.log('test')\r\n            },\r\n            logIntent: (context: SDSContext) => {\r\n                /* context.nluData = event.data */\r\n                console.log('<< NLU intent: ' + context.nluData.intent.name)\r\n            }\r\n        },\r\n    });\r\n\r\n\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLElement> {\r\n    state: State<SDSContext, any, any, any>;  //==dm context >>access via props.state.context\r\n}\r\n//COMPONENT: Big button in the middle, with changing texts\r\nconst ReactiveButton = (props: Props,): JSX.Element => {\r\n    const {playingNow} = props.state.context\r\n    const {ttsAgenda} = props.state.context\r\n\r\n    const maxHinted = props.state.context.hinted >= 5\r\n\tconst maxSkipped = props.state.context.skipped >= 5\r\n\r\n    let promptInGame:string;\r\n    if(maxSkipped && maxHinted){promptInGame = '...eller sÃ¤g Starta om, Sluta'}\r\n    else if(maxSkipped && !maxHinted){promptInGame = '...eller sÃ¤g Tips, Starta om, Sluta'}\r\n    else if(!maxSkipped && maxHinted){promptInGame = '...eller sÃ¤g Pass, Starta om, Sluta'}\r\n    else {promptInGame = '...eller sÃ¤g Tips, Pass, Starta om, Sluta'}  //default\r\n\r\n    let speakingText= playingNow? 'ðŸ˜¼ '+ttsAgenda : 'ðŸ˜» '+ttsAgenda\r\n    let promptMsg = playingNow? promptInGame : \"...sÃ¤g Ja eller Nej\"\r\n\r\n    switch (true) {\r\n        case props.state.matches({ asrtts: 'recognising' }):\r\n            return (\r\n                <button type=\"button\" className=\"glow-on-hover\"\r\n                    style={{ animation: \"glowing 20s linear\"}} {...props}>\r\n                    {/* Listening... */}\r\n\r\n                    <TextLoop mask={true} interval={5000} springConfig={{ stiffness: 170, damping: 8 }} >\r\n                        <div><code> {speakingText} </code></div>\r\n                        <div><code> {promptMsg} </code></div>\r\n                    </TextLoop>\r\n\r\n                </button>\r\n            );\r\n        case props.state.matches({ asrtts: 'speaking' }):\r\n            \r\n            const [spokentext] = useWindupString(speakingText); // adds char-by-char animation\r\n            return (\r\n                <button type=\"button\" className=\"glow-on-hover\"\r\n                    style={{ animation: \"bordering 1s infinite\" }} {...props}>\r\n                    {/* Speaking... */}\r\n                    <code>{spokentext}</code>\r\n                </button>\r\n            );\r\n        default:\r\n            return (\r\n                <button type=\"button\" className=\"glow-on-hover\" {...props}>\r\n                    <HeadShake>Spela nu!</HeadShake>\r\n                </button >\r\n            );\r\n    }\r\n}\r\n\r\n// //MAIN CONTAINER: React webpage elements & VOI\r\nexport default function App() {\r\n    \r\n\r\n    //Voice interface events (& console logs)\r\n    //Text to speech:\r\n    const { speak, cancel, speaking, voices } = useSpeechSynthesis({\r\n        onEnd: () => {send('ENDSPEECH') },\r\n    });\r\n\r\n    //Speech to text\r\n    const { listen, listening, stop } = useSpeechRecognition({\r\n        onResult: (result: any) => {send({ type: \"ASRRESULT\", value: result })  },\r\n    });\r\n\r\n    //List the supported synthesis-voices on the browswer:\r\n    const [voiceIndex, setVoiceIndex] = React.useState(null);\r\n    console.log(voices) //An array of available voices/languages ... varies depending on the computer/browser\r\n    const voice =  voices[32] || null; // voices[idx]? voices[idx] : null *(browser default voice) //edge:8 bengt, edgeDev:32 bengt \r\n\r\n    const [current, send, service] = useMachine(machine, {\r\n        devTools: true,\r\n        actions: {\r\n            recStart: asEffect(() => {\r\n                console.log('Ready to receive a voice input.');\r\n                listen({\r\n                    interimResults: false,\r\n                    continuous: true,\r\n                    lang: 'sv-SE'  //Config ASR input language here. //list of langs https://cloud.google.com/speech-to-text/docs/languages\r\n                });\r\n            }),\r\n            recStop: asEffect(() => {\r\n                console.log('Recognition stopped.');\r\n                stop()\r\n            }),\r\n            ttsStart: asEffect((context, effect) => {\r\n                console.log('Speaking...');\r\n                speak({ text: context.ttsAgenda\r\n                        , voice //Config of TTS output language/voice\r\n                     }) \r\n            }),\r\n            ttsCancel: asEffect((context, effect) => {\r\n                console.log('TTS STOP...');\r\n                cancel()\r\n            }),\r\n            speak: asEffect((context) => {\r\n\t            console.log('Speaking...');\r\n                speak({text: context.ttsAgenda })\r\n            }) \r\n        }\r\n    });\r\n\r\n    // dmMachine-context / React-states, to display on webpage or turn components on/off\r\n    const { confettiSwitch } = current.context; //triggers confetti when true\r\n    const { playingNow } = current.context;\r\n    const { tally } = current.context;\r\n    const { letter } = current.context;\r\n    \r\n    // Config for confetti \r\n    const confettiConfig = {\r\n        angle: 90,\r\n        spread: 360,\r\n        startVelocity: 80,\r\n        elementCount: 400,\r\n        dragFriction: 0.12,\r\n        duration: 7500,\r\n        stagger: 1,\r\n        width: \"7px\",\r\n        height: \"7px\",\r\n        perspective: \"210px\",\r\n        colors: [\"#a864fd\", \"#29cdff\", \"#78ff44\", \"#ff718d\", \"#fdff6a\"]\r\n      };\r\n    \r\n    let clicked=0;\r\n    const handleClick = () =>{ \r\n        if(clicked===0){ console.log(\"clicked\"); send('CLICK'); clicked=1 }\r\n        else{ console.log(\"unclicked\"); send('UNCLICK'); clicked=0 }\r\n    }\r\n\r\n    //>>>JSX codes & various components\r\n    \r\n    // Alt page: Show if not using Chrome or Edge\r\n    if(!isChrome && !isEdge)\r\n    return (\r\n        <div className='OtherBrowsers'>  \r\n            <HeadShake>\r\n            <div className='Box'>   \r\n                <h1>Din webblÃ¤sare stÃ¶der inte taligenkÃ¤nning ðŸ¥² </h1>\r\n                <p>AnvÃ¤nd istÃ¤llet Chrome eller Edge :-)</p>\r\n            </div>\r\n            </HeadShake>\r\n        </div>\r\n      )\r\n\r\n    //Show if using Chrome or Edge\r\n    return (\r\n        <div className='main'>\r\n            <div className=\"PopoverButtons\"> <PopoverButtons/> </div>\r\n            <div className=\"App\">\r\n                \r\n                <div className=\"LetterAndHeart\">\r\n                    <div className=\"GlowLetter\"> <YourLetter letter={letter}/> </div>\r\n                    <div className=\"Heart\"> \r\n                        {playingNow && <HeartBar currentScore={tally} maxScore={5} size={50} />  }\r\n                    </div> \r\n                </div>\r\n                \r\n                <Confetti active={ confettiSwitch } config={ confettiConfig }/> \r\n\r\n                <RubberBand>\r\n                    <div className=\"Button\"> \r\n                        <ReactiveButton state={current} onClick={() => {handleClick()}} /> \r\n                    </div>\r\n                </RubberBand>\r\n\r\n                <div className=\"Subtitles\"> \r\n                    {/* VersionA: FOR Github deployment & Canvas submission */}\r\n                    {/* <YourSubtitles state={current}/>  */}\r\n\r\n                    {/* Version B: FOR demo (on local cuz it cannot show on Github page) */}\r\n                    <UserSubtitles state={current}/> \r\n                </div>\r\n            \r\n            </div>\r\n\r\n        </div>\r\n    )\r\n};\r\n\r\n//COMPONENT: Displaying input of voice interface (ie, recResult)\r\nconst YourSubtitles=(props:Props) =>{\r\n    // Player's speech-- only displays when recResult!=undefined \r\n\r\n    const {tally} = props.state.context\r\n    const {recResult} = props.state.context\r\n    //Prefix face changes based on score of the game\r\n    const  emojis=['ðŸ˜—','ðŸ™‚','ðŸ˜€','ðŸ˜„','ðŸ˜','ðŸ¥³']\r\n    let emoji=tally? emojis[tally]:'ðŸ™ƒ'\r\n\r\n    let subtitlesText:string;\r\n    if(props.state.matches({ asrtts: 'recognising' })){\r\n        subtitlesText=emoji+' Lyssnar nu pÃ¥ dig...'\r\n    }else if(recResult && recResult!=''){\r\n        subtitlesText = emoji+' '+recResult\r\n    }else{\r\n        subtitlesText = ''\r\n    }\r\n\r\n    const [textAnimated] = useWindupString(subtitlesText);\r\n    return(\r\n        <div>\r\n            <span> {textAnimated} </span>\r\n        </div>\r\n    )\r\n}\r\n\r\n//This one doesn't show on Github pages...? but can run locally and use for presentation demo\r\nconst UserSubtitles=(props:Props) =>{\r\n\r\n    const {tally} = props.state.context\r\n    const {recResult} = props.state.context\r\n    // const recResult='testing text'\r\n\r\n    const  emojis=['ðŸ˜—','ðŸ™‚','ðŸ˜€','ðŸ˜„','ðŸ˜','ðŸ¥³']\r\n    let emoji= tally? emojis[tally]:'ðŸ™ƒ'\r\n\r\n    // const defaultText = props.state.matches({ asrtts: 'recognising' })? 'Listening...' : ''\r\n    // const subtitlesText = recResult? recResult : defaultText\r\n\r\n    let subtitlesText:string;\r\n    if(props.state.matches({ asrtts: 'recognising' })){\r\n        subtitlesText='Lyssnar nu pÃ¥ dig...'\r\n    }else if(recResult && recResult!=''){\r\n        subtitlesText = recResult\r\n    }else{\r\n        subtitlesText = ''\r\n    }\r\n\r\n    const [textAnimated] = useWindupString(subtitlesText);\r\n    const showing = subtitlesText!=''\r\n    return(\r\n        <div id='emoji-and-bubble'>\r\n            {showing &&  <span className='speech-bubble'> {textAnimated} </span> }\r\n            {showing && <div id='emoji'> {emoji} </div>}\r\n        </div>\r\n    )\r\n}\r\n\r\n//COMPONENT: Capital letter of the game\r\nconst YourLetter=(props:any) =>{\r\n    // Shows the letter of the current game round \r\n    const letter = props.letter\r\n    return(\r\n        <div> \r\n            {letter? letter.toUpperCase():''}\r\n        </div> \r\n    )\r\n}\r\n\r\n//COMPONENT: Grey heart to be filled with pink, based on percentage\r\nconst HeartBar = (props:any) => {\r\n    \r\n    const maxScore = props.maxScore\r\n    const currentScore = props.currentScore>0? props.currentScore : ''\r\n    const size = props.size\r\n    const percentage = currentScore? 100*currentScore/maxScore : 0\r\n    //add other props? eg, showScore={true/false}; showPercentage={true/false}\r\n\r\n\r\n    const y = 24 - (24 * percentage) / 100; //Height of the pink filling shape\r\n\r\n    //Below: Heart-shaped vector graphs & text inside\r\n    return (\r\n      <div className=\"ProgressBarH\">\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width={size}\r\n          height={size}\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <defs>\r\n            <clipPath id=\"cut-off-bottom\">\r\n              <rect x=\"0\" y={y} width=\"24\" height=\"24\" />\r\n            </clipPath>\r\n          \r\n            <linearGradient id=\"grey-grad\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n                <stop offset=\"0%\" stopColor=\"#cfccce\" stopOpacity=\"0.75\" />\r\n                <stop offset=\"60%\" stopColor=\"#bab8ba\" stopOpacity=\"0.85\" />\r\n                <stop offset=\"100%\" stopColor=\"#949293\" stopOpacity=\"0.9\" />\r\n            </linearGradient>\r\n\r\n            <linearGradient id=\"pink-grad\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n                <stop offset=\"0%\" stopColor=\"#ff33a7\" stopOpacity=\"0.95\" />\r\n                <stop offset=\"60%\" stopColor=\"#ff2667\" stopOpacity=\"0.95\" />\r\n                <stop offset=\"100%\" stopColor=\"rgb(255,0,0)\" stopOpacity=\"0.95\" />\r\n            </linearGradient>\r\n\r\n          </defs>\r\n          \r\n          <path\r\n            style={{ fill: \"url(#grey-grad)\" }}\r\n            d=\"M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z\"\r\n            />\r\n\r\n          <path\r\n            style={{ fill: \"url(#pink-grad)\", }}\r\n            d=\"M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z\"\r\n            clipPath=\"url(#cut-off-bottom)\"\r\n            />\r\n\r\n          <text textAnchor=\"middle\" x=\"12\" y=\"15\" color=\"white\" fontSize=\"11\" fill=\"white\" opacity=\"0.45\"\r\n                style={{animation: \"wiggle 2.5s ease-out infinite\", animationDelay:'0.9s'}}>\r\n            {currentScore} \r\n          </text>\r\n\r\n        </svg>\r\n      </div>\r\n    );\r\n  };\r\n\r\nconst PopoverButtons = () => {\r\n\r\n\r\n    return (\r\n        <div>\r\n\r\n            <Tippy content={\r\n                <div>\r\n                <h4>Har du problem med att spela? :</h4>\r\n            \r\n                    <p>\r\n                    PÃ¥ grund av taligenkÃ¤nnarens begrÃ¤nsningar kan dessa hjÃ¤lpa till... <br></br><br></br>\r\n                    -Tala klart och i normal takt.<br></br><br></br>\r\n                    -VÃ¤nta fÃ¶r katten att avsluta prata och bÃ¶rja lyssna pÃ¥ dig.\r\n                    </p>\r\n                </div>\r\n            } className=\"popover-box\">\r\n                <button className=\"round-button\">?</button>\r\n            </Tippy>\r\n\r\n            <Tippy content={\r\n                    <div>\r\n                    <h4>ABC Game</h4>\r\n                        <p>\r\n                        Designades av: <br></br>\r\n                        Liao Hsien-hao Calvin<br></br>\r\n                        <br></br>\r\n                        fÃ¶r kursprojektet av <strong>LT2216 Dialogue Systems</strong> pÃ¥ GÃ¶teborgs universitet.\r\n                        <br></br><br></br>\r\n                        github.com/chickenbror/ABCgame\r\n                        </p>\r\n                    </div>\r\n            }  className=\"popover-box\">\r\n                <button className=\"round-button\">i</button>\r\n            </Tippy>\r\n\r\n\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}